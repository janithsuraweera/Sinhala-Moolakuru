<!DOCTYPE html>
<html lang="si">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Sinhala Moolakuru - Lessons</title>
  
  <!-- PWA Meta Tags -->
  <meta name="description" content="Learn Sinhala typing with interactive lessons and practice">
  <meta name="theme-color" content="#4a90e2">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Sinhala Moolakuru">
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  
  <!-- Icons -->
  <link rel="icon" type="image/png" href="assets/logo.png">
  <link rel="apple-touch-icon" href="assets/logo.png">
  
  <!-- Stylesheets -->
  <link rel="stylesheet" href="css/styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Sinhala:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@700&display=swap" rel="stylesheet">
</head>
<body>
  <header class="card header-card">
    <div class="logo-title">
      <img src="assets/logo.png" alt="Logo" class="logo" />
      <span class="sinhala-badge">à·ƒà·’à¶‚à·„à¶½ ðŸ‡±ðŸ‡°</span>
      <div class="header-title-row" style="display: flex; align-items: center; gap: 0.7rem;">
        <h1>Sinhala Moolakuru - Lessons</h1>
      </div>
    </div>
    <nav>
      <a href="index.html" class="nav">Home</a>
      <a href="lessons.html" class="nav" style="background: var(--primary); color: white;">Lessons</a>
      <a href="layout.html" class="nav">Layout</a>
      <a href="help/help.html" class="nav">Help</a>
    </nav>
    <button id="mode-toggle" aria-label="Toggle dark mode">ðŸŒ™</button>
  </header>

  <main>
    <section class="card main-card">
      <h2>ðŸ“š Sinhala Typing Lessons</h2>
      <p>Welcome to the Sinhala typing lessons! Choose a lesson to get started.</p>
      
      <div class="lessons-grid">
        <div class="lesson-card">
          <h3>Lesson 1: Basic Letters</h3>
          <p>Learn the basic Sinhala letters (à¶…, à¶†, à¶‡, à¶ˆ, à¶‰, à¶Š)</p>
          <button class="lesson-btn">Start Lesson</button>
        </div>
        
        <div class="lesson-card">
          <h3>Lesson 2: Consonants</h3>
          <p>Practice with consonants (à¶š, à¶œ, à¶¢, à¶§, à¶«, à¶­)</p>
          <button class="lesson-btn">Start Lesson</button>
        </div>
        
        <div class="lesson-card">
          <h3>Lesson 3: Words</h3>
          <p>Learn to type common Sinhala words</p>
          <button class="lesson-btn">Start Lesson</button>
        </div>
        
        <div class="lesson-card">
          <h3>Lesson 4: Sentences</h3>
          <p>Practice typing complete sentences</p>
          <button class="lesson-btn">Start Lesson</button>
        </div>
      </div>
    </section>
  </main>

  <!-- PWA Service Worker Registration -->
  <script>
    // Register service worker for PWA functionality
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then((registration) => {
            console.log('SW registered: ', registration);
          })
          .catch((registrationError) => {
            console.log('SW registration failed: ', registrationError);
          });
      });
    }

    // PWA Install Prompt
    let deferredPrompt;
    const installButton = document.createElement('button');
    installButton.textContent = 'ðŸ“± Install App';
    installButton.style.cssText = `
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #4a90e2;
      color: white;
      border: none;
      border-radius: 25px;
      padding: 10px 20px;
      font-size: 14px;
      cursor: pointer;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      z-index: 1000;
      display: none;
    `;

    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      installButton.style.display = 'block';
      document.body.appendChild(installButton);
    });

    installButton.addEventListener('click', async () => {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        console.log(`User response to the install prompt: ${outcome}`);
        deferredPrompt = null;
        installButton.style.display = 'none';
      }
    });

    window.addEventListener('appinstalled', () => {
      console.log('PWA was installed');
      installButton.style.display = 'none';
    });
  </script>

</body>
</html>
