<!DOCTYPE html>
<html lang="si">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Sinhala Moolakuru - Keyboard Layout</title>
  
  <!-- PWA Meta Tags -->
  <meta name="description" content="Learn Sinhala typing with interactive lessons and practice">
  <meta name="theme-color" content="#4a90e2">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Sinhala Moolakuru">
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  
  <!-- Icons -->
  <link rel="icon" type="image/png" href="assets/logo.png">
  <link rel="apple-touch-icon" href="assets/logo.png">
  
  <!-- Stylesheets -->
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/layout.css">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Sinhala:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@700&display=swap" rel="stylesheet">
</head>
<body>
  <header class="card header-card">
    <div class="logo-title">
      <img src="assets/logo.png" alt="Logo" class="logo" />
      <span class="sinhala-badge">‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω üá±üá∞</span>
      <div class="header-title-row" style="display: flex; align-items: center; gap: 0.7rem;">
        <h1>Sinhala Moolakuru - Layout</h1>
      </div>
    </div>
    <nav>
      <a href="index.html" class="nav">Home</a>
      <a href="lessons.html" class="nav">Lessons</a>
      <a href="layout.html" class="nav" style="background: var(--primary); color: white;">Layout</a>
    </nav>
    <button id="mode-toggle" aria-label="Toggle dark mode">üåô</button>
  </header>

  <main>
    <section class="card main-card">
      <h2>‚å®Ô∏è Interactive Sinhala Keyboard Layout</h2>
      
      
      <!-- Typing Area -->
      <div class="typing-demo-area">
        <div class="demo-text-display" id="demo-text-display">
          Click on keyboard keys to see Sinhala characters appear here...
        </div>
        <div class="demo-input-area">
          <input type="text" id="demo-input" placeholder="Type here or click keyboard keys..." readonly />
          <button id="clear-demo" class="demo-btn">Clear</button>
        </div>
      </div>

      <!-- Interactive Keyboard -->
      <div class="keyboard-container">
        <div class="keyboard">
          <!-- Row 1: Numbers and Symbols -->
          <div class="keyboard-row">
            <div class="key" data-english="`" data-sinhala="~" data-shifted="~" data-altgr="">`<br><span class="sinhala-char">~</span></div>
            <div class="key" data-english="1" data-sinhala="!" data-shifted="!" data-altgr="">1<br><span class="sinhala-char">!</span></div>
            <div class="key" data-english="2" data-sinhala="@" data-shifted="@" data-altgr="">2<br><span class="sinhala-char">@</span></div>
            <div class="key" data-english="3" data-sinhala="#" data-shifted="#" data-altgr="">3<br><span class="sinhala-char">#</span></div>
            <div class="key" data-english="4" data-sinhala="$" data-shifted="$" data-altgr="">4<br><span class="sinhala-char">$</span></div>
            <div class="key" data-english="5" data-sinhala="%" data-shifted="%" data-altgr="">5<br><span class="sinhala-char">%</span></div>
            <div class="key" data-english="6" data-sinhala="^" data-shifted="^" data-altgr="">6<br><span class="sinhala-char">^</span></div>
            <div class="key" data-english="7" data-sinhala="&" data-shifted="&" data-altgr="">7<br><span class="sinhala-char">&</span></div>
            <div class="key" data-english="8" data-sinhala="*" data-shifted="*" data-altgr="">8<br><span class="sinhala-char">*</span></div>
            <div class="key" data-english="9" data-sinhala="(" data-shifted="(" data-altgr="">9<br><span class="sinhala-char">(</span></div>
            <div class="key" data-english="0" data-sinhala=")" data-shifted=")" data-altgr="">0<br><span class="sinhala-char">)</span></div>
            <div class="key" data-english="-" data-sinhala="_" data-shifted="_" data-altgr="">-<br><span class="sinhala-char">_</span></div>
            <div class="key" data-english="=" data-sinhala="+" data-shifted="+" data-altgr="">=<br><span class="sinhala-char">+</span></div>
            <div class="key backspace-key" data-english="Backspace" data-sinhala="‚å´">Backspace</div>
          </div>

          <!-- Row 2: QWERTY -->
          <div class="keyboard-row">
            <div class="key tab-key" data-english="Tab" data-sinhala="Tab">Tab</div>
            <div class="key" data-english="Q" data-sinhala="‡∂Ω" data-shifted="‡∂Ω" data-altgr="‡∑ü">Q<br><span class="sinhala-char">‡∂Ω</span><br><span class="altgr-char">‡∑ü</span></div>
            <div class="key" data-english="W" data-sinhala="‡∑Ö" data-shifted="‡∑Ö" data-altgr="‡∂£">W<br><span class="sinhala-char">‡∑Ö</span><br><span class="altgr-char">‡∂£</span></div>
            <div class="key" data-english="E" data-sinhala="‡∂á" data-shifted="‡∂á" data-altgr="‡∂à">E<br><span class="sinhala-char">‡∂á</span><br><span class="altgr-char">‡∂à</span></div>
            <div class="key" data-english="R" data-sinhala="‡∂ª" data-shifted="‡∂ª" data-altgr="‡∂ç">R<br><span class="sinhala-char">‡∂ª</span><br><span class="altgr-char">‡∂ç</span></div>
            <div class="key" data-english="T" data-sinhala="‡∂ß" data-shifted="‡∂ß" data-altgr="‡∂®">T<br><span class="sinhala-char">‡∂ß</span><br><span class="altgr-char">‡∂®</span></div>
            <div class="key" data-english="Y" data-sinhala="‡∂∫" data-shifted="‡∂∫" data-altgr="‡∂§">Y<br><span class="sinhala-char">‡∂∫</span><br><span class="altgr-char">‡∂§</span></div>
            <div class="key" data-english="U" data-sinhala="‡∂ã" data-shifted="‡∂ã" data-altgr="‡∂å">U<br><span class="sinhala-char">‡∂ã</span><br><span class="altgr-char">‡∂å</span></div>
            <div class="key" data-english="I" data-sinhala="‡∂â" data-shifted="‡∂â" data-altgr="‡∂ä">I<br><span class="sinhala-char">‡∂â</span><br><span class="altgr-char">‡∂ä</span></div>
            <div class="key" data-english="O" data-sinhala="‡∂î" data-shifted="‡∂î" data-altgr="‡∂ï">O<br><span class="sinhala-char">‡∂î</span><br><span class="altgr-char">‡∂ï</span></div>
            <div class="key" data-english="P" data-sinhala="‡∂¥" data-shifted="‡∂¥" data-altgr="‡∂µ">P<br><span class="sinhala-char">‡∂¥</span><br><span class="altgr-char">‡∂µ</span></div>
            <div class="key" data-english="[" data-sinhala="{" data-shifted="{" data-altgr="‡∂•">[<br><span class="sinhala-char">{</span><br><span class="altgr-char">‡∂•</span></div>
            <div class="key" data-english="]" data-sinhala="}" data-shifted="}" data-altgr="‡∂§">]<br><span class="sinhala-char">}</span><br><span class="altgr-char">‡∂§</span></div>
            <div class="key" data-english="\\" data-sinhala="|" data-shifted="|" data-altgr="‡∂£">\<br><span class="sinhala-char">|</span><br><span class="altgr-char">‡∂£</span></div>
          </div>

          <!-- Row 3: ASDF -->
          <div class="keyboard-row">
            <div class="key caps-key" data-english="Caps" data-sinhala="Caps">Caps</div>
            <div class="key" data-english="A" data-sinhala="‡∂Ö" data-shifted="‡∂Ö" data-altgr="‡∂Ü">A<br><span class="sinhala-char">‡∂Ö</span><br><span class="altgr-char">‡∂Ü</span></div>
            <div class="key" data-english="S" data-sinhala="‡∑É" data-shifted="‡∑É" data-altgr="‡∑Å">S<br><span class="sinhala-char">‡∑É</span><br><span class="altgr-char">‡∑Å</span></div>
            <div class="key" data-english="D" data-sinhala="‡∂Ø" data-shifted="‡∂Ø" data-altgr="‡∂∞">D<br><span class="sinhala-char">‡∂Ø</span><br><span class="altgr-char">‡∂∞</span></div>
            <div class="key" data-english="F" data-sinhala="‡∑Ü" data-shifted="‡∑Ü" data-altgr="‡∂∑">F<br><span class="sinhala-char">‡∑Ü</span><br><span class="altgr-char">‡∂∑</span></div>
            <div class="key" data-english="G" data-sinhala="‡∂ú" data-shifted="‡∂ú" data-altgr="‡∂ù">G<br><span class="sinhala-char">‡∂ú</span><br><span class="altgr-char">‡∂ù</span></div>
            <div class="key" data-english="H" data-sinhala="‡∑Ñ" data-shifted="‡∑Ñ" data-altgr="‡∂¶">H<br><span class="sinhala-char">‡∑Ñ</span><br><span class="altgr-char">‡∂¶</span></div>
            <div class="key" data-english="J" data-sinhala="‡∂¢" data-shifted="‡∂¢" data-altgr="‡∂£">J<br><span class="sinhala-char">‡∂¢</span><br><span class="altgr-char">‡∂£</span></div>
            <div class="key" data-english="K" data-sinhala="‡∂ö" data-shifted="‡∂ö" data-altgr="‡∂õ">K<br><span class="sinhala-char">‡∂ö</span><br><span class="altgr-char">‡∂õ</span></div>
            <div class="key" data-english="L" data-sinhala="‡∂Ω" data-shifted="‡∂Ω" data-altgr="‡∑Ö">L<br><span class="sinhala-char">‡∂Ω</span><br><span class="altgr-char">‡∑Ö</span></div>
            <div class="key" data-english=";" data-sinhala=":" data-shifted=":" data-altgr="‡∂Ç">;<br><span class="sinhala-char">:</span><br><span class="altgr-char">‡∂Ç</span></div>
            <div class="key" data-english="'" data-sinhala="\"" data-shifted="\"" data-altgr="‡∂≥">'<br><span class="sinhala-char">"</span><br><span class="altgr-char">‡∂≥</span></div>
            <div class="key enter-key" data-english="Enter" data-sinhala="Enter">Enter</div>
          </div>

          <!-- Row 4: ZXCV -->
          <div class="keyboard-row">
            <div class="key shift-key" data-english="Shift" data-sinhala="Shift">Shift</div>
            <div class="key" data-english="Z" data-sinhala="‡∑É" data-shifted="‡∑É" data-altgr="‡∑Å">Z<br><span class="sinhala-char">‡∑É</span><br><span class="altgr-char">‡∑Å</span></div>
            <div class="key" data-english="X" data-sinhala="x" data-shifted="x" data-altgr="‡∂û">X<br><span class="sinhala-char">x</span><br><span class="altgr-char">‡∂û</span></div>
            <div class="key" data-english="C" data-sinhala="‡∂†" data-shifted="‡∂†" data-altgr="‡∂°">C<br><span class="sinhala-char">‡∂†</span><br><span class="altgr-char">‡∂°</span></div>
            <div class="key" data-english="V" data-sinhala="‡∑Ä" data-shifted="‡∑Ä" data-altgr="‡∂∑">V<br><span class="sinhala-char">‡∑Ä</span><br><span class="altgr-char">‡∂∑</span></div>
            <div class="key" data-english="B" data-sinhala="‡∂∂" data-shifted="‡∂∂" data-altgr="‡∂π">B<br><span class="sinhala-char">‡∂∂</span><br><span class="altgr-char">‡∂π</span></div>
            <div class="key" data-english="N" data-sinhala="‡∂±" data-shifted="‡∂±" data-altgr="‡∂´">N<br><span class="sinhala-char">‡∂±</span><br><span class="altgr-char">‡∂´</span></div>
            <div class="key" data-english="M" data-sinhala="‡∂∏" data-shifted="‡∂∏" data-altgr="‡∂ü">M<br><span class="sinhala-char">‡∂∏</span><br><span class="altgr-char">‡∂ü</span></div>
            <div class="key" data-english="," data-sinhala="<" data-shifted="<" data-altgr="‡∂è">,<br><span class="sinhala-char"><</span><br><span class="altgr-char">‡∂è</span></div>
            <div class="key" data-english="." data-sinhala=">" data-shifted=">" data-altgr="‡∂ê">.<br><span class="sinhala-char">></span><br><span class="altgr-char">‡∂ê</span></div>
            <div class="key" data-english="/" data-sinhala="?" data-shifted="?" data-altgr="‡∂è">/<br><span class="sinhala-char">?</span><br><span class="altgr-char">‡∂è</span></div>
            <div class="key shift-key" data-english="Shift" data-sinhala="Shift">Shift</div>
          </div>

          <!-- Row 5: Spacebar -->
          <div class="keyboard-row">
            <div class="key space-key" data-english="Space" data-sinhala=" ">Space</div>
          </div>
        </div>
      </div>

      <!-- Keyboard State Controls -->
      <div class="keyboard-controls">
        <div class="control-group">
          <label>Keyboard State:</label>
          <div class="state-buttons">
            <button class="state-btn active" data-state="normal">Normal</button>
            <button class="state-btn" data-state="shift">Shift</button>
            <button class="state-btn" data-state="altgr">AltGr</button>
          </div>
        </div>
      </div>

      <!-- Instructions -->
      <div class="instructions">
        <h3>How to Use:</h3>
        <ul>
          <li>Click on any key to see the Sinhala character it produces</li>
          <li>Type directly in the input box to see real-time conversion</li>
          <li>Use the Clear button to reset the typing area</li>
          <li>Switch between Normal, Shift, and AltGr states using the buttons above</li>
          <li>This layout follows the Standard Sinhala Computer Keyboard Layout (Sri Lanka Standard 1134 Revision 2: 2004)</li>
          <li>Red characters (AltGr) show special Sinhala symbols and modifiers</li>
          <li>Use keyboard shortcuts: Ctrl/Cmd + K to focus input, Ctrl/Cmd + L to clear</li>
        </ul>
        
        <h4>Keyboard States:</h4>
        <ul>
          <li><strong>Normal:</strong> Standard Sinhala character mapping</li>
          <li><strong>Shift:</strong> Shifted characters and symbols</li>
          <li><strong>AltGr:</strong> Special Sinhala symbols and modifiers (shown in red)</li>
        </ul>
        
        <h4>Special Symbols:</h4>
        <ul>
          <li><strong>‡∑ü</strong> (rakaaraansaya) - AltGr + Q</li>
          <li><strong>‡∂£</strong> (yansaya) - AltGr + W</li>
          <li><strong>‡∂û</strong> (repaya) - AltGr + X</li>
          <li><strong>‡∂¶</strong> (join adjacent letters) - AltGr + H</li>
          <li><strong>‡∂Ç</strong> (anusvara) - AltGr + ;</li>
          <li><strong>‡∂≥</strong> (niggahita) - AltGr + '</li>
        </ul>
      </div>
    </section>
  </main>

  <footer class="card footer-card">
    <small>¬© 2025 Sinhala Mulakuru | Developed by <a href="https://github.com/janithsuraweera/" target="_blank">Janith Suraweera</a></small>
    <button id="about-btn" class="footer-btn" aria-label="About Sinhala Moolakuru">About</button>
  </footer>

  <!-- About Modal -->
  <div id="about-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <button class="close-modal-about">&times;</button>
      <h2>About Sinhala Moolakuru</h2>
      <p>This application is designed to help you learn and practice Sinhala typing with different keyboard layouts.</p>
      <p><strong>Version:</strong> 1.0.0</p>
      <p><strong>Features:</strong></p>
      <ul>
        <li>Interactive keyboard layout demonstration</li>
        <li>Real-time Sinhala character conversion</li>
        <li>Standard Sinhala Keyboard Layout support</li>
        <li>Educational typing practice</li>
      </ul>
      <p>Developed with ‚ù§Ô∏è by <a href="https://github.com/janithsuraweera/" target="_blank">Janith Suraweera</a>.</p>
    </div>
  </div>

  <!-- PWA Service Worker Registration -->
  <script>
    // Register service worker for PWA functionality
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then((registration) => {
            console.log('SW registered: ', registration);
          })
          .catch((registrationError) => {
            console.log('SW registration failed: ', registrationError);
          });
      });
    }

    // PWA Install Prompt
    let deferredPrompt;
    const installButton = document.createElement('button');
    installButton.textContent = 'üì± Install App';
    installButton.style.cssText = `
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #4a90e2;
      color: white;
      border: none;
      border-radius: 25px;
      padding: 10px 20px;
      font-size: 14px;
      cursor: pointer;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      z-index: 1000;
      display: none;
    `;

    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      installButton.style.display = 'block';
      document.body.appendChild(installButton);
    });

    installButton.addEventListener('click', async () => {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        console.log(`User response to the install prompt: ${outcome}`);
        deferredPrompt = null;
        installButton.style.display = 'none';
      }
    });

    window.addEventListener('appinstalled', () => {
      console.log('PWA was installed');
      installButton.style.display = 'none';
    });
  </script>

  <script src="js/layout.js"></script>
</body>
</html> 